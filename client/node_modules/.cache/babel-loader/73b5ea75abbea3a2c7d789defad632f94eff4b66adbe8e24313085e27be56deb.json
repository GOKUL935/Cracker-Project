{"ast":null,"code":"var _jsxFileName = \"F:\\\\my project\\\\Vendor\\\\client\\\\src\\\\pages\\\\Checkout.jsx\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { useCart } from \"../context/CartContext\";\nimport { loadStripe } from \"@stripe/stripe-js\";\n\n// Stripe public key (Vite use pannina import.meta.env.VITE_STRIPE_PUBLISHABLE_KEY)\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst stripePromise = loadStripe(import.meta.env.VITE_STRIPE_PUBLISHABLE_KEY);\nfunction Checkout() {\n  _s();\n  const {\n    cartItems\n  } = useCart();\n  const [loading, setLoading] = useState(false);\n\n  // calculate total\n  const totalAmount = cartItems.reduce((sum, item) => sum + item.price * (item.quantity || 1), 0);\n  const handleStripePayment = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const response = await fetch(\"http://localhost:4000/v1/checkout/sessions\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          cartItems,\n          totalAmount\n        })\n      });\n      if (!response.ok) throw new Error(\"Failed to get session id\");\n      const data = await response.json();\n      const stripe = await stripePromise;\n      await (stripe === null || stripe === void 0 ? void 0 : stripe.redirectToCheckout({\n        sessionId: data.sessionId\n      }));\n    } catch (error) {\n      alert(\"Error: \" + error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"20px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Order Summary\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No items in cart \\u274C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n        children: cartItems.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [item.name, \" \\xD7 \", item.quantity || 1, \" \\u2014 \\u20B9\", item.price * (item.quantity || 1)]\n        }, item.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Total: \\u20B9\", totalAmount]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleStripePayment,\n        disabled: loading,\n        style: {\n          background: \"green\",\n          color: \"#fff\",\n          padding: \"10px 20px\",\n          border: \"none\",\n          borderRadius: \"5px\",\n          marginTop: \"20px\",\n          cursor: \"pointer\"\n        },\n        children: loading ? \"Processing...\" : \"Pay Now\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n}\n_s(Checkout, \"IVwGQc4odMl+iwlQ5uzMbjV0RGg=\", false, function () {\n  return [useCart];\n});\n_c = Checkout;\nexport default Checkout;\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["useState","useCart","loadStripe","jsxDEV","_jsxDEV","Fragment","_Fragment","stripePromise","import","meta","env","VITE_STRIPE_PUBLISHABLE_KEY","Checkout","_s","cartItems","loading","setLoading","totalAmount","reduce","sum","item","price","quantity","handleStripePayment","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","ok","Error","data","json","stripe","redirectToCheckout","sessionId","error","alert","message","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","name","id","onClick","disabled","background","color","border","borderRadius","marginTop","cursor","_c","$RefreshReg$"],"sources":["F:/my project/Vendor/client/src/pages/Checkout.jsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useCart } from \"../context/CartContext\"; \r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\n\r\n// Stripe public key (Vite use pannina import.meta.env.VITE_STRIPE_PUBLISHABLE_KEY)\r\nconst stripePromise = loadStripe(import.meta.env.VITE_STRIPE_PUBLISHABLE_KEY);\r\n\r\nfunction Checkout() {\r\n  const { cartItems } = useCart();\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // calculate total\r\n  const totalAmount = cartItems.reduce(\r\n    (sum, item) => sum + item.price * (item.quantity || 1),\r\n    0\r\n  );\r\n\r\n  const handleStripePayment = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await fetch(\"http://localhost:4000/v1/checkout/sessions\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ cartItems, totalAmount }),\r\n      });\r\n\r\n      if (!response.ok) throw new Error(\"Failed to get session id\");\r\n\r\n      const data = await response.json();\r\n      const stripe = await stripePromise;\r\n      await stripe?.redirectToCheckout({ sessionId: data.sessionId });\r\n    } catch (error) {\r\n      alert(\"Error: \" + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: \"20px\" }}>\r\n      <h2>Order Summary</h2>\r\n      {cartItems.length === 0 ? (\r\n        <p>No items in cart ❌</p>\r\n      ) : (\r\n        <>\r\n          <ul>\r\n            {cartItems.map((item) => (\r\n              <li key={item.id}>\r\n                {item.name} × {item.quantity || 1} — ₹\r\n                {item.price * (item.quantity || 1)}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n          <h3>Total: ₹{totalAmount}</h3>\r\n          <button\r\n            onClick={handleStripePayment}\r\n            disabled={loading}\r\n            style={{\r\n              background: \"green\",\r\n              color: \"#fff\",\r\n              padding: \"10px 20px\",\r\n              border: \"none\",\r\n              borderRadius: \"5px\",\r\n              marginTop: \"20px\",\r\n              cursor: \"pointer\",\r\n            }}\r\n          >\r\n            {loading ? \"Processing...\" : \"Pay Now\"}\r\n          </button>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Checkout;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}