{"ast":null,"code":"var _jsxFileName = \"F:\\\\my project\\\\Vendor\\\\client\\\\src\\\\pages\\\\Checkout.jsx\",\n  _s = $RefreshSig$();\n// client/src/pages/Checkout.jsx\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { useLocation } from \"react-router-dom\";\nimport { useState } from \"react\";\n\n// ‚úÖ Stripe public (publishable) key\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst publishableKey = process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY;\nconst stripePromise = loadStripe(publishableKey);\nfunction Checkout() {\n  _s();\n  const location = useLocation();\n  const {\n    cartItems,\n    totalAmount\n  } = location.state || {\n    cartItems: [],\n    totalAmount: 0\n  };\n  const [loading, setLoading] = useState(false);\n  const handleStripePayment = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const response = await fetch(\"http://localhost:4000/v1/checkout/sessions\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          cartItems,\n          totalAmount\n        })\n      });\n      const data = await response.json();\n      console.log(\"Stripe Session Response üëâ\", data);\n      if (!response.ok) {\n        throw new Error(data.error || \"Server error while creating session\");\n      }\n      const stripe = await stripePromise;\n      if (data.id) {\n        // ‚úÖ Redirect to Stripe Checkout\n        await stripe.redirectToCheckout({\n          sessionId: data.id\n        });\n      } else if (data.url) {\n        // fallback (manual redirect)\n        window.location.href = data.url;\n      } else {\n        alert(\"‚ùå Checkout failed: No session info received\");\n      }\n    } catch (err) {\n      console.error(\"‚ùå Stripe error:\", err);\n      alert(\"Checkout failed: \" + err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"30px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Checkout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No items in cart.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [cartItems.map((item, index) => /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [item.name, \" (\", item.quantity, \"x) \\u2013 \\u20B9\", item.price * item.quantity]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Total: \\u20B9\", totalAmount]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleStripePayment,\n        disabled: loading,\n        style: {\n          background: \"green\",\n          color: \"white\",\n          padding: \"10px 20px\",\n          border: \"none\",\n          cursor: \"pointer\",\n          marginTop: \"15px\"\n        },\n        children: loading ? \"Processing...\" : \"Pay with Stripe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n}\n_s(Checkout, \"VPigqhbO0ksD/1EIk7ItFHW2+hM=\", false, function () {\n  return [useLocation];\n});\n_c = Checkout;\nexport default Checkout;\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["loadStripe","useLocation","useState","jsxDEV","_jsxDEV","Fragment","_Fragment","publishableKey","process","env","REACT_APP_STRIPE_PUBLISHABLE_KEY","stripePromise","Checkout","_s","location","cartItems","totalAmount","state","loading","setLoading","handleStripePayment","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","data","json","console","log","ok","Error","error","stripe","id","redirectToCheckout","sessionId","url","window","href","alert","err","message","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","item","index","name","quantity","price","onClick","disabled","background","color","border","cursor","marginTop","_c","$RefreshReg$"],"sources":["F:/my project/Vendor/client/src/pages/Checkout.jsx"],"sourcesContent":["// client/src/pages/Checkout.jsx\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { useState } from \"react\";\r\n\r\n// ‚úÖ Stripe public (publishable) key\r\nconst publishableKey = process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY;\r\nconst stripePromise = loadStripe(publishableKey);\r\n\r\nfunction Checkout() {\r\n  const location = useLocation();\r\n  const { cartItems, totalAmount } = location.state || { cartItems: [], totalAmount: 0 };\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleStripePayment = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await fetch(\"http://localhost:4000/v1/checkout/sessions\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ cartItems, totalAmount }),\r\n      });\r\n\r\n      const data = await response.json();\r\n      console.log(\"Stripe Session Response üëâ\", data);\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || \"Server error while creating session\");\r\n      }\r\n\r\n      const stripe = await stripePromise;\r\n      if (data.id) {\r\n        // ‚úÖ Redirect to Stripe Checkout\r\n        await stripe.redirectToCheckout({ sessionId: data.id });\r\n      } else if (data.url) {\r\n        // fallback (manual redirect)\r\n        window.location.href = data.url;\r\n      } else {\r\n        alert(\"‚ùå Checkout failed: No session info received\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"‚ùå Stripe error:\", err);\r\n      alert(\"Checkout failed: \" + err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: \"30px\" }}>\r\n      <h2>Checkout</h2>\r\n\r\n      {cartItems.length === 0 ? (\r\n        <p>No items in cart.</p>\r\n      ) : (\r\n        <>\r\n          {cartItems.map((item, index) => (\r\n            <p key={index}>\r\n              {item.name} ({item.quantity}x) ‚Äì ‚Çπ{item.price * item.quantity}\r\n            </p>\r\n          ))}\r\n\r\n          <h3>Total: ‚Çπ{totalAmount}</h3>\r\n\r\n          <button\r\n            onClick={handleStripePayment}\r\n            disabled={loading}\r\n            style={{\r\n              background: \"green\",\r\n              color: \"white\",\r\n              padding: \"10px 20px\",\r\n              border: \"none\",\r\n              cursor: \"pointer\",\r\n              marginTop: \"15px\",\r\n            }}\r\n          >\r\n            {loading ? \"Processing...\" : \"Pay with Stripe\"}\r\n          </button>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Checkout;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}