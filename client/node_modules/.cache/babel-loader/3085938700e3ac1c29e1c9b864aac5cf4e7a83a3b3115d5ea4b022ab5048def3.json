{"ast":null,"code":"var _jsxFileName = \"F:\\\\my project\\\\Vendor\\\\client\\\\src\\\\pages\\\\Checkout.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useCart } from \"../context/CartContext\";\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Checkout() {\n  _s();\n  const {\n    cartItems\n  } = useCart();\n  const stripe = useStripe();\n  const elements = useElements();\n  const [clientSecret, setClientSecret] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const totalAmount = cartItems.reduce((acc, item) => acc + item.price * item.qty, 0);\n  useEffect(() => {\n    // Create PaymentIntent on backend\n    axios.post(\"http://localhost:5000/create-payment-intent\", {\n      amount: totalAmount * 100\n    }).then(res => setClientSecret(res.data.clientSecret)).catch(err => console.log(err));\n  }, [cartItems]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    if (!stripe || !elements) return;\n    const card = elements.getElement(CardElement);\n    const {\n      paymentIntent,\n      error\n    } = await stripe.confirmCardPayment(clientSecret, {\n      payment_method: {\n        card: card\n      }\n    });\n    if (error) {\n      alert(error.message);\n      setLoading(false);\n    } else {\n      alert(\"Payment Successful!\");\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"checkout-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-summary\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Cart Summary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this), cartItems.map((item, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [item.name, \" x \", item.qty]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\u20B9\", item.price * item.qty]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 25\n        }, this)]\n      }, idx, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 21\n      }, this)), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Total: \\u20B9\", totalAmount]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"payment-form\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Payment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(CardElement, {\n        className: \"card-element\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: !stripe || loading,\n        children: loading ? \"Processing...\" : \"Pay Now\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n}\n_s(Checkout, \"umbjmGdeNI6lcNMI1qEn9jqatBw=\", false, function () {\n  return [useCart, useStripe, useElements];\n});\n_c = Checkout;\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["React","useState","useEffect","useCart","CardElement","useStripe","useElements","axios","jsxDEV","_jsxDEV","Checkout","_s","cartItems","stripe","elements","clientSecret","setClientSecret","loading","setLoading","totalAmount","reduce","acc","item","price","qty","post","amount","then","res","data","catch","err","console","log","handleSubmit","e","preventDefault","card","getElement","paymentIntent","error","confirmCardPayment","payment_method","alert","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","idx","name","onSubmit","type","disabled","_c","$RefreshReg$"],"sources":["F:/my project/Vendor/client/src/pages/Checkout.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useCart } from \"../context/CartContext\";\r\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\r\nimport axios from \"axios\";\r\n\r\nexport default function Checkout() {\r\n    const { cartItems } = useCart();\r\n    const stripe = useStripe();\r\n    const elements = useElements();\r\n    const [clientSecret, setClientSecret] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const totalAmount = cartItems.reduce((acc, item) => acc + item.price * item.qty, 0);\r\n\r\n    useEffect(() => {\r\n        // Create PaymentIntent on backend\r\n        axios.post(\"http://localhost:5000/create-payment-intent\", { amount: totalAmount * 100 })\r\n            .then(res => setClientSecret(res.data.clientSecret))\r\n            .catch(err => console.log(err));\r\n    }, [cartItems]);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        if (!stripe || !elements) return;\r\n\r\n        const card = elements.getElement(CardElement);\r\n\r\n        const { paymentIntent, error } = await stripe.confirmCardPayment(clientSecret, {\r\n            payment_method: {\r\n                card: card,\r\n            },\r\n        });\r\n\r\n        if (error) {\r\n            alert(error.message);\r\n            setLoading(false);\r\n        } else {\r\n            alert(\"Payment Successful!\");\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"checkout-container\">\r\n            <div className=\"cart-summary\">\r\n                <h2>Cart Summary</h2>\r\n                {cartItems.map((item, idx) => (\r\n                    <div key={idx} className=\"cart-item\">\r\n                        <span>{item.name} x {item.qty}</span>\r\n                        <span>₹{item.price * item.qty}</span>\r\n                    </div>\r\n                ))}\r\n                <h3>Total: ₹{totalAmount}</h3>\r\n            </div>\r\n\r\n            <form className=\"payment-form\" onSubmit={handleSubmit}>\r\n                <h2>Payment</h2>\r\n                <CardElement className=\"card-element\" />\r\n                <button type=\"submit\" disabled={!stripe || loading}>\r\n                    {loading ? \"Processing...\" : \"Pay Now\"}\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}