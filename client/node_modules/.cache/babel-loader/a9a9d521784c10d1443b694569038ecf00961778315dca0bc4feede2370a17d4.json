{"ast":null,"code":"var _jsxFileName = \"F:\\\\my project\\\\Vendor\\\\client\\\\src\\\\pages\\\\Checkout.jsx\",\n  _s = $RefreshSig$();\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { useState } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\n// Load stripe services with publishable key\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst stripePromise = loadStripe(import.meta.env.VITE_STRIPE_PUBLISHABLE_KEY);\nfunction Checkout() {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const location = useLocation();\n  const {\n    cartItems,\n    totalAmount\n  } = location.state || {\n    cartItems: [],\n    totalAmount: 0\n  };\n  const handleStripePayment = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const response = await fetch(\"http://localhost:4000/v1/checkout/sessions\", {\n        method: \"POST\"\n      });\n      if (!response.ok) throw new Error(\"Failed to get session id\");\n      const data = await response.json();\n      const stripe = await stripePromise;\n      await (stripe === null || stripe === void 0 ? void 0 : stripe.redirectToCheckout({\n        sessionId: data.sessionId\n      }));\n    } catch (error) {\n      alert(\"Error: \" + error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"flex flex-col items-center justify-center py-20\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-semibold mb-6\",\n      children: \"Checkout Page\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"font-medium\",\n        children: \"Order Summary:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Total Items: \", (cartItems === null || cartItems === void 0 ? void 0 : cartItems.length) || 0]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Total Amount: \\u20B9\", totalAmount]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleStripePayment,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        className: \"bg-emerald-500 px-5 py-2.5 rounded text-white\",\n        children: loading ? \"Processing...\" : \"Pay Now\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n}\n_s(Checkout, \"Zp0nvC7GgLZqwu4VK7LBYq/Z9eI=\", false, function () {\n  return [useLocation];\n});\n_c = Checkout;\nexport default Checkout;\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["loadStripe","useState","useLocation","jsxDEV","_jsxDEV","stripePromise","import","meta","env","VITE_STRIPE_PUBLISHABLE_KEY","Checkout","_s","loading","setLoading","location","cartItems","totalAmount","state","handleStripePayment","e","preventDefault","response","fetch","method","ok","Error","data","json","stripe","redirectToCheckout","sessionId","error","alert","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","onSubmit","type","disabled","_c","$RefreshReg$"],"sources":["F:/my project/Vendor/client/src/pages/Checkout.jsx"],"sourcesContent":["import { loadStripe } from \"@stripe/stripe-js\";\r\nimport { useState } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\n// Load stripe services with publishable key\r\nconst stripePromise = loadStripe(import.meta.env.VITE_STRIPE_PUBLISHABLE_KEY);\r\n\r\nfunction Checkout() {\r\n  const [loading, setLoading] = useState(false);\r\n  const location = useLocation();\r\n  const { cartItems, totalAmount } = location.state || { cartItems: [], totalAmount: 0 };\r\n\r\n  const handleStripePayment = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await fetch(\"http://localhost:4000/v1/checkout/sessions\", {\r\n        method: \"POST\",\r\n      });\r\n\r\n      if (!response.ok) throw new Error(\"Failed to get session id\");\r\n\r\n      const data = await response.json();\r\n\r\n      const stripe = await stripePromise;\r\n      await stripe?.redirectToCheckout({ sessionId: data.sessionId });\r\n    } catch (error) {\r\n      alert(\"Error: \" + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className=\"flex flex-col items-center justify-center py-20\">\r\n      <h2 className=\"text-xl font-semibold mb-6\">Checkout Page</h2>\r\n\r\n      <div className=\"mb-6\">\r\n        <h3 className=\"font-medium\">Order Summary:</h3>\r\n        <p>Total Items: {cartItems?.length || 0}</p>\r\n        <p>Total Amount: â‚¹{totalAmount}</p>\r\n      </div>\r\n\r\n      <form onSubmit={handleStripePayment}>\r\n        <button\r\n          type=\"submit\"\r\n          disabled={loading}\r\n          className=\"bg-emerald-500 px-5 py-2.5 rounded text-white\"\r\n        >\r\n          {loading ? \"Processing...\" : \"Pay Now\"}\r\n        </button>\r\n      </form>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Checkout;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}