{"ast":null,"code":"var _jsxFileName = \"F:\\\\my project\\\\Vendor\\\\client\\\\src\\\\pages\\\\Checkout.jsx\",\n  _s = $RefreshSig$();\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { useLocation } from \"react-router-dom\";\nimport { useState } from \"react\";\n\n// Stripe public key (publishable key)\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Checkout() {\n  _s();\n  const location = useLocation();\n  const {\n    cartItems,\n    totalAmount\n  } = location.state || {\n    cartItems: [],\n    totalAmount: 0\n  };\n  const [loading, setLoading] = useState(false);\n  const handleStripePayment = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const response = await fetch(\"http://localhost:4000/v1/checkout/sessions\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          cartItems,\n          totalAmount\n        })\n      });\n      if (!response.ok) {\n        throw new Error(\"Server error while creating session\");\n      }\n      const data = await response.json();\n      if (data.url) {\n        // üîπ Instead of window.location.href (old way),\n        // use Stripe redirect for safety\n        const stripe = await stripePromise;\n        stripe.redirectToCheckout({\n          sessionId: data.id\n        });\n      } else {\n        alert(\"‚ùå Checkout failed: \" + (data.error || \"Unknown error\"));\n      }\n    } catch (err) {\n      alert(\"Checkout failed: \" + err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"30px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Checkout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No items in cart.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [cartItems.map((item, index) => /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [item.name, \" (\", item.quantity, \"x) - \\u20B9\", item.price * item.quantity]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Total: \\u20B9\", totalAmount]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleStripePayment,\n        disabled: loading,\n        style: {\n          background: \"green\",\n          color: \"white\",\n          padding: \"10px 20px\",\n          border: \"none\",\n          cursor: \"pointer\",\n          marginTop: \"15px\"\n        },\n        children: loading ? \"Processing...\" : \"Pay with Stripe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n_s(Checkout, \"VPigqhbO0ksD/1EIk7ItFHW2+hM=\", false, function () {\n  return [useLocation];\n});\n_c = Checkout;\nexport default Checkout;\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["loadStripe","useLocation","useState","jsxDEV","_jsxDEV","Fragment","_Fragment","Checkout","_s","location","cartItems","totalAmount","state","loading","setLoading","handleStripePayment","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","ok","Error","data","json","url","stripe","stripePromise","redirectToCheckout","sessionId","id","alert","error","err","message","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","item","index","name","quantity","price","onClick","disabled","background","color","border","cursor","marginTop","_c","$RefreshReg$"],"sources":["F:/my project/Vendor/client/src/pages/Checkout.jsx"],"sourcesContent":["import { loadStripe } from \"@stripe/stripe-js\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { useState } from \"react\";\r\n\r\n// Stripe public key (publishable key)\r\n\r\n\r\n\r\nfunction Checkout() {\r\n  const location = useLocation();\r\n  const { cartItems, totalAmount } = location.state || { cartItems: [], totalAmount: 0 };\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleStripePayment = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await fetch(\"http://localhost:4000/v1/checkout/sessions\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ cartItems, totalAmount }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Server error while creating session\");\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.url) {\r\n        // üîπ Instead of window.location.href (old way),\r\n        // use Stripe redirect for safety\r\n        const stripe = await stripePromise;\r\n        stripe.redirectToCheckout({ sessionId: data.id });\r\n      } else {\r\n        alert(\"‚ùå Checkout failed: \" + (data.error || \"Unknown error\"));\r\n      }\r\n    } catch (err) {\r\n      alert(\"Checkout failed: \" + err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: \"30px\" }}>\r\n      <h2>Checkout</h2>\r\n\r\n      {cartItems.length === 0 ? (\r\n        <p>No items in cart.</p>\r\n      ) : (\r\n        <>\r\n          {cartItems.map((item, index) => (\r\n            <p key={index}>\r\n              {item.name} ({item.quantity}x) - ‚Çπ{item.price * item.quantity}\r\n            </p>\r\n          ))}\r\n\r\n          <h3>Total: ‚Çπ{totalAmount}</h3>\r\n\r\n          <button\r\n            onClick={handleStripePayment}\r\n            disabled={loading}\r\n            style={{\r\n              background: \"green\",\r\n              color: \"white\",\r\n              padding: \"10px 20px\",\r\n              border: \"none\",\r\n              cursor: \"pointer\",\r\n              marginTop: \"15px\",\r\n            }}\r\n          >\r\n            {loading ? \"Processing...\" : \"Pay with Stripe\"}\r\n          </button>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Checkout;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}